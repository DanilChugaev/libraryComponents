ymaps.ready(function(){function e(){window.innerWidth<=1199?n.behaviors.disable("drag"):n.behaviors.enable("drag")}var t=[57.971789,56.173147],n=new ymaps.Map("place",{center:t,zoom:12}),a=new ymaps.GeoObject({geometry:{type:"Point",coordinates:t}});n.geoObjects.add(a),n.behaviors.disable("scrollZoom"),e(),window.addEventListener("resize",function(t){e()}),window.addEventListener("load",function(t){e()})}),function(){var e=document.getElementById("policy"),t=document.getElementById("activate-modal"),n=document.getElementsByClassName("modal__close")[0];t.onclick=function(){e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")},window.onkeydown=function(t){27==t.keyCode&&(e.style.display="none")}}(),function(){function e(e){var n,a,o=t(e.name,1);if(e.type.match(/image.*/)){var c,d=new FileReader;d.addEventListener("load",function(e){c=document.createElement("img"),c.src=e.target.result,c.name=o,i.appendChild(c)}),d.readAsDataURL(e)}else(n=e.name.match(/\.(?:docx|doc|odt|txt|rtf|pdf|ppt|pptx|xlsx|xls|sxc|accdb|mdb|html|php|xml)$/i))&&(n=n[0].toLowerCase().slice(1));if(n){switch(n){case"docx":case"doc":case"odt":n="docx";break;case"xlsx":case"xls":n="xlsx";break;case"pptx":case"ppt":n="pptx";break;case"accdb":case"mdb":n="accdb"}a="<img src='image/"+n+".jpg' name='document' alt='"+n+" file'> "}else a="";var r=document.createElement("li");r.innerHTML=a+"<span>"+o+"</span> <button type='button' name='"+o+"' onclick='deleteFiles(this)'>X</button>",l.appendChild(r)}function t(e,t){switch(t){case 1:return e.replace(/'/g,"&#34;");case 2:return e.replace(/"/g,"&#34;")}}function n(e,t){if(t&&"function"==typeof t){var n;e.dataTransfer?n=e.dataTransfer.files:e.target&&(n=e.target.files),t.call(null,n)}}function a(e,t){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("multiple",!0),a.style.display="none",a.addEventListener("change",function(e){n(e,t)}),e.appendChild(a),e.addEventListener("dragover",function(t){t.preventDefault(),t.stopPropagation(),e.classList.add("dragover")}),e.addEventListener("dragleave",function(t){t.preventDefault(),t.stopPropagation(),e.classList.remove("dragover")}),e.addEventListener("drop",function(a){a.preventDefault(),a.stopPropagation(),e.classList.remove("dragover"),n(a,t)}),e.addEventListener("click",function(){a.value=null,a.click()})}var o=document.getElementById("upload"),i=document.getElementById("preview-img"),l=document.getElementById("preview-text"),c=new FormData,d=document.getElementById("formWithFile"),r=document.getElementById("upload-button"),s=new XMLHttpRequest,u=document.getElementById("droppable");o.addEventListener("change",function(n){var a=[].slice.call(this.files);0!=a.length&&a.forEach(function(n,a,o){e(n);var i=t(n.name,1);c.append("file["+i+"]",n,i)})}),d.onsubmit=function(e){e.preventDefault(),r.innerHTML="Загружаю...",s.open("POST","handler.php",!0),s.onload=function(){200===s.status?r.innerHTML="Загружено":r.innerHTML="Ошибка загрузки"},s.send(c)},deleteFiles=function(e){var n=t(e.getAttribute("name"),2),a=i.childNodes;a.forEach(function(e,a,o){var i=t(e.name,1);i==n&&e.remove()}),e.parentNode.remove(),c.delete("file["+n+"]")},window.makeDroppable=a,a(u,function(n){var a=[].slice.call(n);0!=a.length&&a.forEach(function(n,a,o){e(n);var i=t(n.name,1);c.append("file["+i+"]",n,i)})})}(),function(){var e=document.getElementsByClassName("scrolled"),t=[].slice.call(e),n=document.getElementById("arrow-to-top"),a=.2;0!=t.length&&(window.onscroll=function(){window.pageYOffset||0!=document.documentElement.scrollTop?n.classList.add("active"):n.classList.remove("active")},t.forEach(function(e,t,n){e.addEventListener("click",function(e){function t(e){null===c&&(c=e);var n=e-c,d=i<0?Math.max(l-n/a,l+i):Math.min(l+n/a,l+i);window.scrollTo(0,d),d!=l+i?requestAnimationFrame(t):location.elem=o}e.preventDefault();var n=this.getAttribute("href").slice(1),o=document.getElementById(n),i=o.getBoundingClientRect().top,l=window.pageYOffset,c=null;requestAnimationFrame(t)})}))}();