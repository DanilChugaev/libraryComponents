ymaps.ready(function(){function e(){window.innerWidth<=1199?n.behaviors.disable("drag"):n.behaviors.enable("drag")}var t=[57.971789,56.173147],n=new ymaps.Map("place",{center:t,zoom:12}),a=new ymaps.GeoObject({geometry:{type:"Point",coordinates:t}});n.geoObjects.add(a),n.behaviors.disable("scrollZoom"),e(),window.addEventListener("resize",function(t){e()}),window.addEventListener("load",function(t){e()})}),function(){var e=document.getElementById("policy"),t=document.getElementById("activate-modal"),n=document.getElementsByClassName("modal__close")[0];t.onclick=function(){e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")},window.onkeydown=function(t){27==t.keyCode&&(e.style.display="none")}}(),function(){function e(e){var n=t(e.name,1);if(e.type.match(/image.*/)){var a,o=new FileReader;o.addEventListener("load",function(e){a=document.createElement("img"),a.src=e.target.result,a.name=n,i.appendChild(a)}),o.readAsDataURL(e)}var r=document.createElement("li");r.innerHTML="<span>"+n+"</span> <button type='button' name='"+n+"' onclick='deleteFiles(this)'>X</button>",l.appendChild(r)}function t(e,t){switch(t){case 1:return e.replace(/'/g,"&#34;");case 2:return e.replace(/"/g,"&#34;")}}function n(e,t){if(t&&"function"==typeof t){var n;e.dataTransfer?n=e.dataTransfer.files:e.target&&(n=e.target.files),t.call(null,n)}}function a(e,t){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("multiple",!0),a.style.display="none",a.addEventListener("change",function(e){n(e,t)}),e.appendChild(a),e.addEventListener("dragover",function(t){t.preventDefault(),t.stopPropagation(),e.classList.add("dragover")}),e.addEventListener("dragleave",function(t){t.preventDefault(),t.stopPropagation(),e.classList.remove("dragover")}),e.addEventListener("drop",function(a){a.preventDefault(),a.stopPropagation(),e.classList.remove("dragover"),n(a,t)}),e.addEventListener("click",function(){a.value=null,a.click()})}var o=document.getElementById("upload"),i=document.getElementById("preview-img"),l=document.getElementById("preview-text"),r=new FormData,c=document.getElementById("formWithFile"),d=document.getElementById("upload-button"),s=new XMLHttpRequest,u=document.getElementById("droppable");o.addEventListener("change",function(n){var a=[].slice.call(this.files);0!=a.length&&a.forEach(function(n,a,o){e(n);var i=t(n.name,1);r.append("file["+i+"]",n,i)})}),c.onsubmit=function(e){e.preventDefault(),d.innerHTML="Загружаю...",s.open("POST","handler.php",!0),s.onload=function(){200===s.status?d.innerHTML="Загружено":d.innerHTML="Ошибка загрузки"},s.send(r)},deleteFiles=function(e){var n=t(e.getAttribute("name"),2),a=i.childNodes;a.forEach(function(e,a,o){var i=t(e.name,1);i==n&&e.remove()}),e.parentNode.remove(),r.delete("file["+n+"]")},window.makeDroppable=a,a(u,function(n){var a=[].slice.call(n);0!=a.length&&a.forEach(function(n,a,o){e(n);var i=t(n.name,1);r.append("file["+i+"]",n,i)})})}(),function(){var e=document.getElementsByClassName("scrolled"),t=[].slice.call(e),n=document.getElementById("arrow-to-top"),a=.2;0!=t.length&&(window.onscroll=function(){window.pageYOffset||0!=document.documentElement.scrollTop?n.classList.add("active"):n.classList.remove("active")},t.forEach(function(e,t,n){e.addEventListener("click",function(e){function t(e){null===r&&(r=e);var n=e-r,c=i<0?Math.max(l-n/a,l+i):Math.min(l+n/a,l+i);window.scrollTo(0,c),c!=l+i?requestAnimationFrame(t):location.elem=o}e.preventDefault();var n=this.getAttribute("href").slice(1),o=document.getElementById(n),i=o.getBoundingClientRect().top,l=window.pageYOffset,r=null;requestAnimationFrame(t)})}))}();